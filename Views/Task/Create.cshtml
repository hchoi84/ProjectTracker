@model TaskViewModel

@{
  ViewBag.Title = "Create Task";
  var deadlineDefault = DateTime.Now.AddDays(1).ToString("yyyy-MM-dd");
}

<form asp-controller="task" asp-action="create" method="POST" class="mt-3">
  @for (var i = 0; i < Model.Tasks.Count; i++)
  {
  <input type="hidden" readonly asp-for="@Model.Tasks[i].ProjectId">
  <div class="form-group">
    <label asp-for="@Model.Tasks[i].ProjectId">Project Name</label>
    <select asp-for="@Model.Tasks[i].ProjectId" class="form-control">
      @foreach (var project in Model.Projects)
      {
        <option value="@project.Id">@project.ProjectName</option>
      }
    </select>
  </div>
  <div class="form-group">
    <label asp-for="@Model.Tasks[i].TaskName">Task Name</label>
    <input asp-for="@Model.Tasks[i].TaskName" class="form-control">
    <span asp-validation-for="@Model.Tasks[i].TaskName"></span>
  </div>
  <div class="form-group">
    <label asp-for="@Model.Tasks[i].StatusId">Task Status</label>
    <Select asp-for="@Model.Tasks[i].StatusId" class="form-control">
      @foreach (var ts in Model.TaskStatuses)
      {
      <Option value="@ts.Id">@ts.StatusName</Option>
      }
    </Select>
  </div>
  <div class="form-group">
    <label asp-for="@Model.Tasks[i].Deadline">Deadline</label>
    <input asp-for="@Model.Tasks[i].Deadline" class="form-control" value="@deadlineDefault">
    <span asp-validation-for="@Model.Tasks[i].Deadline"></span>
  </div>
  <div class="form-group">
    <label asp-for="@Model.Tasks[i].MemberId">Creator</label>
    <select asp-for="@Model.Tasks[i].MemberId" class="form-control">
      @foreach (var member in Model.Members)
      {
        <option value="@member.Id">@member.GetFullName</option>
      }
    </select>
  </div>
  <div class="form-group">
    <label asp-for="@Model.Tasks[i].Description">Description</label>
    <textarea asp-for="@Model.Tasks[i].Description" class="form-control"></textarea>
    <span asp-validation-for="@Model.Tasks[i].Description"></span>
  </div>
  }
  <button type="submit" class="btn btn-primary">Create</button>
  <a asp-controller="task" asp-action="index" class="btn btn-primary ml-3">Cancel</a>
</form>